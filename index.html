<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>BoostEx Trade — Торговый кабинет</title>
<style>
  :root{
    --bg:#0b1220; --card:#0f172a; --soft:#0c1528; --text:#e5e7eb; --muted:#9ca3af;
    --brand:#06b6d4; --good:#22c55e; --bad:#ef4444; --border:#1f2937; --ring:#1e40af;
  }
  *{box-sizing:border-box} html,body{height:100%}
  body{
    margin:0; color:var(--text); font:14px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Arial;
    background:
      radial-gradient(60vw 40vh at 10% -10%, rgba(14,165,233,.12), transparent 40%),
      radial-gradient(60vw 40vh at 110% 10%, rgba(99,102,241,.12), transparent 35%),
      linear-gradient(180deg,#0b1220 0%, #0b1220 55%, #0f172a 100%);
  }
  body::before{
    content:""; position:fixed; inset:0; pointer-events:none;
    background-image:
      linear-gradient(to right, rgba(255,255,255,.03) 1px, transparent 1px),
      linear-gradient(to bottom, rgba(255,255,255,.03) 1px, transparent 1px);
    background-size: 48px 48px;
    mask-image: radial-gradient(80% 60% at 50% 10%, rgba(0,0,0,.5), transparent 100%);
  }
  .wrap{max-width:1100px; margin:0 auto; padding:20px}
  header{position:sticky; top:0; z-index:10; background:linear-gradient(180deg,rgba(11,18,32,.8),rgba(11,18,32,.5)); backdrop-filter: blur(8px); border-bottom:1px solid var(--border)}
  .row{display:flex; gap:12px; flex-wrap:wrap; align-items:center}
  .right{margin-left:auto}
  .card{background:linear-gradient(180deg,var(--card),var(--soft)); border:1px solid var(--border); border-radius:14px; padding:16px; box-shadow: 0 10px 30px rgba(0,0,0,.2)}
  .h1{font-weight:700; font-size:18px}
  .h2{font-weight:600; font-size:16px}
  .muted{color:var(--muted)}
  .btn{background:var(--brand); color:#041018; border:none; border-radius:10px; padding:10px 14px; font-weight:700; cursor:pointer}
  .btn.ghost{background:transparent; color:var(--text); border:1px solid var(--border)}
  .btn.small{padding:8px 10px; font-weight:600; border-radius:8px}
  .input, .select{background:#0b1220; color:var(--text); border:1px solid var(--border); border-radius:10px; padding:10px 12px; outline:none}
  .input:focus, .select:focus{border-color:var(--ring); box-shadow: 0 0 0 3px rgba(30,64,175,.35)}
  .kpis{display:grid; grid-template-columns:repeat(4,1fr); gap:12px}
  .kpi{background:var(--soft); border:1px solid var(--border); border-radius:12px; padding:12px}
  .kpi .val{font-size:22px; font-weight:800}
  .grid2{display:grid; grid-template-columns:1fr 1fr; gap:12px}
  .table{width:100%; border-collapse:collapse}
  .table th,.table td{padding:10px; border-bottom:1px solid var(--border); text-align:left}
  .pnl-pos{color:var(--good)} .pnl-neg{color:var(--bad)}
  .tag{display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border:1px solid var(--border); border-radius:999px; background:#0b1220; color:#cbd5e1}
  .canvas-wrap{background:#0b1220; border:1px solid var(--border); border-radius:12px; padding:10px}
  .modal{position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,.45); z-index:30}
  .modal.open{display:flex}
  .sheet{background:linear-gradient(180deg,#101a2e,#0d1628); border:1px solid var(--border); border-radius:16px; padding:18px; width:min(520px,92vw)}
  .tabs{display:flex; gap:8px; margin-bottom:18px;}
  .tab{padding:8px 22px; border-radius:10px 10px 0 0; background:var(--soft); color:var(--text); cursor:pointer; font-weight:600; border:1px solid var(--border); border-bottom:none;}
  .tab.active{background:var(--brand); color:#041018;}
  .tariff-table{width:100%; border-collapse:collapse; margin-bottom:16px;}
  .tariff-table th, .tariff-table td{padding:8px 10px; border-bottom:1px solid var(--border); font-size:13px;}
  .deal-list{font-size:13px; border-top:1px solid var(--border); margin-top:8px;}
  .deal-list th, .deal-list td{padding:6px 8px;}
  .deal-pnl-pos{color:var(--good);} .deal-pnl-neg{color:var(--bad);}
  @media (max-width:900px){ .kpis{grid-template-columns:repeat(2,1fr)} .grid2{grid-template-columns:1fr} }
</style>
</head>
<body>
<header style="display:none" id="mainHeader">
  <div class="wrap row">
    <div class="h1">BoostEx — торговый кабинет</div>
    <div class="row right">
      <span class="tag" id="statusTag"></span>
      <button class="btn small" id="openDeposit">Депозит</button>
      <button class="btn small ghost" id="openWithdraw">Вывод</button>
    </div>
  </div>
</header>
<div id="authPage" style="display:block">
  <main class="wrap" style="max-width:400px; margin-top:50px;">
    <section class="card">
      <div class="h2" style="margin-bottom:12px;">Регистрация / Вход</div>
      <div class="row" style="margin-bottom:12px;">
        <input id="authEmail" class="input" style="min-width:220px" placeholder="email" />
      </div>
      <div class="row" style="margin-bottom:12px;">
        <input id="authPass" class="input" style="min-width:220px" placeholder="пароль" type="password" />
      </div>
      <div class="row">
        <button class="btn" id="authLoginBtn">Войти</button>
        <span id="authMsg" class="muted"></span>
      </div>
    </section>
  </main>
</div>
<div id="cabinetPage" style="display:none">
  <header id="mainHeaderShow">
    <div class="wrap row">
      <div class="h1">BoostEx — торговый кабинет</div>
      <div class="row right">
        <span class="tag" id="statusTag2"></span>
        <button class="btn small" id="openDeposit">Депозит</button>
        <button class="btn small ghost" id="openWithdraw">Вывод</button>
      </div>
    </div>
  </header>
  <main class="wrap" id="app">
    <div class="tabs">
      <div class="tab active" id="tab-cabinet">Кабинет</div>
      <div class="tab" id="tab-my-tariffs">Мои тарифы</div>
      <div class="tab" id="tab-converter">Конвертер</div>
    </div>
    <div id="page-cabinet2">
      <!-- Оставлено без изменений -->
      <section class="card" id="tariffSection">
        <div class="h2">Открыть новый тариф</div>
        <div class="row" style="margin-top:10px">
          <select id="tariffSelect" class="select">
            <option value="conservative">Начальный: $100–$700, 13% за 10 дней</option>
            <option value="balanced">Средний: $3000–$9000, 21% за 25 дней</option>
            <option value="aggressive">Максимальный: $10,000–$100,000, 35% за 47 дней</option>
          </select>
          <select id="tariffAsset" class="select">
            <option>BTC</option>
            <option>ETH</option>
            <option>BNB</option>
            <option>SOL</option>
            <option>TON</option>
            <option>USDT</option>
          </select>
          <input id="tariffDeposit" class="input" type="number" placeholder="Сумма" style="width:140px">
          <button class="btn" id="startTariffBtn">Запустить тариф</button>
        </div>
        <div id="tariffMsg" class="muted" style="margin-top:10px"></div>
      </section>
      <section class="card" id="tariffsListSection" style="margin-bottom:12px; display:none;">
        <div class="h2">Ваши тарифы</div>
        <div id="tariffsList"></div>
      </section>
      <section class="kpis">
        <div class="kpi"><div class="muted">Баланс (USD)</div><div class="val" id="kpiEquity">$—</div></div>
        <div class="kpi"><div class="muted">Доход (30д)</div><div class="val" id="kpiPnl">—</div></div>
        <div class="kpi"><div class="muted">Сделки</div><div class="val" id="kpiTrades">—</div></div>
        <div class="kpi"><div class="muted">Статус</div><div class="val">Онлайн</div></div>
      </section>
      <section class="grid2">
        <div class="card">
          <div class="h2">Балансы</div>
          <div id="balances" class="muted" style="margin-top:6px">Войдите, чтобы увидеть баланс.</div>
        </div>
        <div class="card">
          <div class="h2">Курсы (USD) — топ-10</div>
          <div id="prices" class="muted" style="margin-top:6px">—</div>
        </div>
      </section>
      <section class="card">
        <div class="row">
          <div class="h2">Кривая капитала</div>
        </div>
        <div class="canvas-wrap" style="margin-top:10px; position:relative;">
          <canvas id="equityChart" width="1000" height="280" style="cursor:pointer"></canvas>
        </div>
      </section>
      <section class="card">
        <div class="row">
          <div class="h2">Сделки (последние)</div>
          <div class="right row">
            <select id="symbolFilter" class="select">
              <option value="">Все инструменты</option>
              <option>BTC</option><option>ETH</option><option>BNB</option><option>SOL</option><option>TON</option>
            </select>
            <button class="btn small ghost" id="exportCsv">Экспорт CSV</button>
          </div>
        </div>
        <table class="table" style="margin-top:6px">
          <thead><tr><th>Время</th><th>Инструмент</th><th>Сторона</th><th>Кол-во</th><th>Цена</th><th>P&L ($)</th></tr></thead>
          <tbody id="trades"></tbody>
        </table>
      </section>
    </div>
    <div id="page-my-tariffs" style="display:none;">
      <section class="card">
        <div class="h2">Открытые и завершённые тарифы</div>
        <table class="tariff-table">
          <thead>
            <tr>
              <th>Тип</th><th>Сумма</th><th>Доходность</th><th>Доход</th><th>Старт</th><th>Финиш</th><th>Статус</th>
            </tr>
          </thead>
          <tbody id="myTariffsTable"></tbody>
        </table>
        <div id="myTariffsDeals"></div>
      </section>
    </div>
    <!-- КОНВЕРТЕР -->
    <div id="page-converter" style="display:none;">
      <section class="card">
        <div class="h2">Конвертер монет</div>
        <div class="row" style="margin-bottom:10px">
          <select id="converterFrom" class="select">
            <option>BTC</option>
            <option>ETH</option>
            <option>BNB</option>
            <option>SOL</option>
            <option>TON</option>
            <option>USDT</option>
            <option>USDC</option>
            <option>XRP</option>
          </select>
          <span style="font-weight:bold">→</span>
          <select id="converterTo" class="select">
            <option>BTC</option>
            <option>ETH</option>
            <option>BNB</option>
            <option>SOL</option>
            <option>TON</option>
            <option>USDT</option>
            <option>USDC</option>
            <option>XRP</option>
          </select>
          <input id="converterAmount" class="input" type="number" placeholder="Сумма" style="width:120px">
          <button class="btn" id="converterBtn">Конвертировать</button>
        </div>
        <div id="converterResult" class="muted"></div>
      </section>
    </div>
  </main>
</div>

<!-- Модалки депозит/вывод (display:none по умолчанию) -->
<div class="modal" id="modalDeposit">
  <div class="sheet">
    <div class="row"><div class="h2">Депозит</div><button class="btn small ghost right" data-close="deposit">Закрыть</button></div>
    <div class="row" style="margin-top:10px">
      <select id="depAsset" class="select">
        <option>USDT (TRC20)</option><option>USDC (TRC20)</option><option>BTC</option><option>ETH</option><option>TON</option>
      </select>
      <button class="btn small" id="genAddr">Сгенерировать адрес</button>
    </div>
    <div id="depInfo" class="muted" style="margin-top:10px">Выберите актив и сгенерируйте адрес пополнения.</div>
    <div id="qrBox" class="card" style="margin-top:10px; display:none">
      <div class="muted">QR-код</div>
      <canvas id="qr" width="220" height="220" style="margin-top:8px; background:#0b1220; border:1px solid var(--border); border-radius:10px"></canvas>
    </div>
  </div>
</div>
<div class="modal" id="modalWithdraw">
  <div class="sheet">
    <div class="row"><div class="h2">Вывод средств</div><button class="btn small ghost right" data-close="withdraw">Закрыть</button></div>
    <div class="row" style="margin-top:10px">
      <select id="wdAsset" class="select">
        <option>USDT (TRC20)</option><option>USDC (TRC20)</option><option>BTC</option><option>ETH</option><option>TON</option>
      </select>
      <input id="wdAddr" class="input" placeholder="Адрес получателя" style="min-width:260px">
      <input id="wdAmt" class="input" placeholder="Сумма" type="number" step="0.0001" style="width:120px">
      <button class="btn small" id="wdSend">Отправить заявку</button>
    </div>
    <div class="muted" style="margin-top:6px">Минимальный вывод: эквивалент 50 USDT. Комиссии как на Bybit.</div>
    <div id="wdMsg" style="margin-top:8px"></div>
  </div>
</div>

<script>
const state = {
  logged: false,
  token: null,
  balances: { BTC:0.0142, ETH:1.18, BNB:4.2, SOL:12.5, TON:55, TRX:1200, USDT:120000, USDC:0, XRP:280 },
  prices:   { BTC:65000, ETH:3400, BNB:580, LTC:75,  SOL:155, TON:6,  TRX:0.12, USDT:1,  USDC:1,  XRP:0.55 },
  equity: [], trades: [],
  simTimer: null, profile: 'balanced',
  tariffs: []
};
const $ = (id)=>document.getElementById(id);
const fmtUSD = v => '$' + Number(v).toLocaleString('en-US', {maximumFractionDigits:2});

// Тарифы
const tariffs = {
  conservative: { min: 100, max: 700, days: 10, yield: 0.13 },
  balanced:    { min: 3000, max: 9000, days: 25, yield: 0.21 },
  aggressive:  { min: 10000, max: 100000, days: 47, yield: 0.35 }
};
// ----- АВТОРИЗАЦИЯ -----
$('authLoginBtn').onclick = () => {
  const email = $('authEmail').value.trim();
  const pass = $('authPass').value.trim();
  if(email==='admin@example.com' && pass==='admin123') {
    state.logged = true; state.token = Math.random().toString(36).slice(2);
    $('authMsg').textContent = '';
    $('authPage').style.display = 'none';
    $('cabinetPage').style.display = '';
    $('mainHeader').style.display = 'none';
    $('mainHeaderShow').style.display = '';
    renderBalances(); renderPrices(); if(state.equity.length===0) seedEquity(); drawChart(); renderKPIs(); renderTariffsList(); showTab('cabinet');
  } else {
    $('authMsg').textContent = 'Неверный email или пароль!';
  }
};
// ----- /АВТОРИЗАЦИЯ -----
function showTab(tab) {
  $('tab-cabinet').classList.toggle('active', tab === 'cabinet');
  $('tab-my-tariffs').classList.toggle('active', tab === 'my-tariffs');
  $('tab-converter').classList.toggle('active', tab === 'converter');
  $('page-cabinet2').style.display = tab === 'cabinet' ? '' : 'none';
  $('page-my-tariffs').style.display = tab === 'my-tariffs' ? '' : 'none';
  $('page-converter').style.display = tab === 'converter' ? '' : 'none';
}
$('tab-cabinet').onclick = ()=>showTab('cabinet');
$('tab-my-tariffs').onclick = ()=>{showTab('my-tariffs'); renderMyTariffsTable();};
$('tab-converter').onclick = ()=>{showTab('converter');};

// --- КОНВЕРТЕР ---
$('converterBtn').onclick = function() {
  const from = $('converterFrom').value;
  const to = $('converterTo').value;
  const amount = +$('converterAmount').value;
  if (!from || !to || from === to) {
    $('converterResult').textContent = "Выберите разные монеты."; return;
  }
  if (!amount || amount <= 0) {
    $('converterResult').textContent = "Введите сумму."; return;
  }
  const priceFrom = state.prices[from], priceTo = state.prices[to];
  if (!priceFrom || !priceTo) {
    $('converterResult').textContent = "Ошибка получения цены."; return;
  }
  const usd = amount * priceFrom;
  const toAmount = usd / priceTo;
  $('converterResult').innerHTML = `${amount} ${from} по курсу <b>${fmtUSD(priceFrom)}</b> = <span style="color:#22c55e;font-weight:bold;">${toAmount.toFixed(6)} ${to}</span> (курс ${fmtUSD(priceTo)})`;
};

// --- ОСТАЛЬНОЙ ТВОЙ JS ---
// (оставлено без изменений, смотри выше)

function renderTariffsList() {/* ... */}
function scheduleTariffTrades(tariff) {/* ... */}
function finishTariff(tariff) {/* ... */}
function renderBalances(){ $('balances').textContent = state.logged ? Object.entries(state.balances).map(([k,v])=>`${k}: ${v}`).join(' · ') : 'Войдите, чтобы увидеть баланс.'; }
function renderPrices(){ $('prices').textContent = Object.entries(state.prices).map(([k,v])=>`${k}: ${fmtUSD(v)}`).join(' · '); }
function renderKPIs(){
  const last = state.equity[state.equity.length-1]?.e || 10000;
  document.getElementById('kpiEquity').textContent = fmtUSD(last);
  const first30 = state.equity[Math.max(0, state.equity.length-30)]?.e || last;
  const pnl = last - first30;
  document.getElementById('kpiPnl').innerHTML = (pnl>=0?'<span class="pnl-pos">+':'<span class="pnl-neg">') + pnl.toFixed(2) + '</span>';
  document.getElementById('kpiTrades').textContent = state.trades.length;
}
function seedEquity(){ let e = 10000; const pts=[]; for(let i=0;i<60;i++){ e += (Math.random()-.45)*25; pts.push({ts: Date.now()-(60-i)*3600000, e:+e.toFixed(2)});} state.equity = pts; }
function drawChart() {/* ... */}
function renderTrades(){/* ... */}
document.getElementById('exportCsv').onclick=()=>{/* ... */}
const modalDeposit=document.getElementById('modalDeposit'), modalWithdraw=document.getElementById('modalWithdraw');
const open=m=>m.classList.add('open'), close=m=>m.classList.remove('open');
document.querySelectorAll('[data-close="deposit"]').forEach(b=>b.onclick=()=>close(modalDeposit));
document.querySelectorAll('[data-close="withdraw"]').forEach(b=>b.onclick=()=>close(modalWithdraw));
document.getElementById('openDeposit').onclick = ()=> open(modalDeposit);
document.getElementById('openWithdraw').onclick= ()=> open(modalWithdraw);

document.getElementById('genAddr').onclick=()=>{/* ... */}
document.getElementById('wdSend').onclick=()=>{/* ... */}
function renderMyTariffsTable() {/* ... */}

seedEquity();
showTab('cabinet');
setInterval(()=>{
  drawChart(); renderTariffsList(); renderMyTariffsTable();
}, 60000);
</script>
</body>
</html>
